<h1 mat-dialog-title>Edit [NEED TO INSERT SKILL TYPE] Skills</h1>

<form *ngIf="consultant$ | async" (ngSubmit)="updateConsultant()">
  <span *ngFor="let displaySkill of displaySkills$ | async">{{ displaySkill.name }} - Display order: {{ displaySkill.displayOrder}}<br></span>
  <mat-form-field class="skill-search" appearance="outline">

    <div class="input-container">
      <mat-icon>search</mat-icon>
      <input
        matInput
        #skillInput
        placeholder="Search for skills"
        matChipInputAddOnBlur="true" 
        [formControl]="skillCtrl" 
        [matAutocomplete]="auto"
        [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addNewSkill($event)">
    </div>

    <mat-autocomplete 
      autoActiveFirstOption
      #auto="matAutocomplete"
      (optionSelected)="selected($event)">
      <mat-option *ngFor="let skill of filteredAvailableSkills$ | async" [value]="skill" [disabled]="skill.selected">
        {{ skill.name }} <ng-container *ngIf="skill.selected">(Selected)</ng-container>
      </mat-option>
    </mat-autocomplete>

  </mat-form-field>

  <mat-chip-list #chipList multiple="true">
      <mat-chip 
        *ngFor="let skill of selectedSkills$ | async" 
        removable="true" 
        color="primary"
        (removed)="remove(skill)"
        (click)="chipClicked(chip)"
        [value]="skill"
        [selected]="skill.display"
        #chip="matChip">
        {{ skill.name }}
        <mat-icon matChipRemove>cancel</mat-icon>
      </mat-chip>
    </mat-chip-list>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="close()">CANCEL</button>
    <button mat-raised-button color="primary" type="submit" cdkFocusInitial>SAVE</button>
  </mat-dialog-actions>
</form>